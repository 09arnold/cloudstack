<?xml version="1.0" encoding="UTF-8"?>
<!-- Copyright 2008 Cloud.Com Inc. All Rights Reserved -->

<project name="Cloud.com Cloud Stack Build Dispatch" default="help" basedir=".">
    <description>
        This is the overall dispatch file.  It includes other build
        files but doesnot provide targets of its own.  Do not modify
        this file.  If you need to create your own targets, modify the 
        developer.xml.
    </description>
  
    <dirname property="base.dir" file="${ant.file.Cloud.com Cloud Stack Build Dispatch}"/>

    <condition property="build.dir" value="${base.dir}/build" else="${base.dir}/build"> <!-- silly no-op -->
      <and>
        <available file="cloudstack-proprietary/build/build-cloud-premium.xml"/>
        <not>
          <isset property="OSS"/>
        </not>
      </and>
    </condition>

    <condition property="build-cloud.properties.file" value="${build.dir}/override/build-cloud.properties" else="${build.dir}/build-cloud.properties">
      <available file="${build.dir}/override/build-cloud.properties" />
    </condition>
  
    <property file="${build-cloud.properties.file}"/>
  
    <property name="dist.dir" location="${base.dir}/dist"/>
    <property name="target.dir" location="${base.dir}/target"/>

    <condition property="build.file" value="cloudstack-proprietary/build/build-cloud-premium.xml" else="${build.dir}/build-cloud.xml">
      <and>
        <available file="cloudstack-proprietary/build/build-cloud-premium.xml"/>
        <not>
          <isset property="OSS"/>
        </not>
      </and>
    </condition>

    <condition property="package.file" value="cloudstack-proprietary/build/package-premium.xml" else="${build.dir}/package.xml">
      <and>
        <available file="cloudstack-proprietary/build/package-premium.xml"/>
        <not>
          <isset property="OSS"/>
        </not>
      </and>
    </condition>

    <condition property="developer.file" value="cloudstack-proprietary/build/developer-premium.xml" else="${build.dir}/developer.xml">
      <and>
        <available file="cloudstack-proprietary/build/developer-premium.xml"/>
        <not>
          <isset property="OSS"/>
        </not>
      </and>
    </condition>
	
    <condition property="docs.file" value="cloudstack-proprietary/build/build-docs-premium.xml" else="${build.dir}/build-docs.xml">
      <and>
        <available file="cloudstack-proprietary/build/build-docs-premium.xml"/>
        <not>
          <isset property="OSS"/>
        </not>
      </and>
    </condition>

    <condition property="test.file" value="cloudstack-proprietary/build/build-tests-premium.xml" else="${build.dir}/build-tests.xml">
      <and>
        <available file="cloudstack-proprietary/build/build-tests-premium.xml"/>
        <not>
          <isset property="OSS"/>
        </not>
      </and>
    </condition>

    <import file="${base.dir}/cloudstack-proprietary/plugins/zynga/build.xml" optional='true'/>
    <import file="${build.file}" optional="false"/>
    <import file="${docs.file}" optional="true"/>
    <import file="${test.file}" optional="true"/>
    <import file="${package.file}" optional="true"/>
    <import file="${developer.file}" optional="true"/>
  
</project>


